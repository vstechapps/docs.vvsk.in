<div class="viewer-overlay" (click)="onClose()">
    <div class="viewer-content" (click)="$event.stopPropagation()">
        <div class="viewer-header">
            <span class="file-name">{{ file?.name }}</span>
            <div class="actions">
                <button class="download-btn" (click)="onDownloadClick()">
                    <span class="material-icons">download</span>
                    Download
                </button>
                <button class="close-btn" (click)="onClose()">âœ•</button>
            </div>
        </div>
        <div class="viewer-body">
            <pdf-viewer *ngIf="isPdf" [src]="downloadUrl" [render-text]="true" [original-size]="false"
                style="width: 100%; height: 100%; display: block;">
            </pdf-viewer>
            <img *ngIf="isImage" [src]="downloadUrl" alt="file" class="preview-image">
            <video *ngIf="isVideo" [src]="downloadUrl" controls class="preview-video"></video>
            <div *ngIf="!isPdf && !isImage && !isVideo" class="unsupported">
                <p>Preview not available for this file type.</p>
                <button class="download-link" (click)="onDownloadClick()">Download</button>
            </div>
        </div>
    </div>
    <app-signin-popup *ngIf="showSigninPopup" (close)="closeSigninPopup()" (signin)="onSignin()"></app-signin-popup>
</div>